webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},n=a("VU/8")({name:"App"},o,!1,null,null,null).exports,r=a("/ocq"),i=a("mvHQ"),l=a.n(i),c=a("mtWM"),u=a.n(c),d={name:"navbar",data:function(){return{isConnected:!1,userRole:0}},methods:{getUserData:function(t){u.a.post("api/user/validate_token.php",{jwt:t}).then(function(t){localStorage.setItem("userData",l()(t.data.data))}).catch(function(t){console.log(t)})}},created:function(){this.isConnected=""!==localStorage.getItem("jwt"),this.isConnected?(this.getUserData(localStorage.getItem("jwt")),this.userData=JSON.parse(localStorage.getItem("userData"))):(localStorage.setItem("jwt",""),localStorage.setItem("userData","{}"))}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-bottom":"10em"}},[a("nav",{staticClass:"blue-grey"},[a("div",{staticClass:"nav-wrapper"},[a("router-link",{staticClass:"brand-logo ",attrs:{to:"/"}},[t._v("Comaction")]),t._v(" "),a("ul",{staticClass:"right hide-on-med-and-down",attrs:{id:"nav-mobile"}},[3==t.userRole?a("li",[a("a",{attrs:{href:""}},[t._v("Partenaires")])]):t._e(),t._v(" "),2==t.userRole?a("li",[a("a",{attrs:{href:""}},[t._v("Agences")])]):t._e(),t._v(" "),2==t.userRole?a("li",[a("a",{attrs:{href:""}},[t._v("Commerciaux")])]):t._e(),t._v(" "),1==t.userRole?a("li",[a("a",{attrs:{href:""}},[t._v("Souscription")])]):t._e(),t._v(" "),a("li",[a("router-link",{attrs:{to:"/contact"}},[t._v("Contact")])],1),t._v(" "),t._m(0)])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"/account"}},[this._v("Mon compte")])])}]},p=a("VU/8")(d,m,!1,null,null,null).exports,v={name:"dashboard",components:{Header:p},created:function(){var t,e,a,s,o;t=document,e="script",a="weatherwidget-io-js",o=t.getElementsByTagName(e)[0],t.getElementById(a)||((s=t.createElement(e)).id=a,s.src="https://weatherwidget.io/js/widget.min.js",o.parentNode.insertBefore(s,o))}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dashboard"},[e("Header")],1)},staticRenderFns:[]};var f=a("VU/8")(v,g,!1,function(t){a("qR8r")},null,null).exports,h={name:"account",data:function(){return{isConnected:!1,userData:[]}},methods:{login:function(){localStorage.setItem("jwt",""),localStorage.setItem("userData","{}");var t=this;u.a.post("api/user/login.php",{email:this.$refs.email.value,password:this.$refs.password.value}).then(function(e){localStorage.setItem("jwt",e.data.jwt),t.getUserData(e.data.jwt),window.location="/"}).catch(function(t){console.log(t)})},logout:function(){localStorage.setItem("jwt",""),localStorage.setItem("userData","{}"),window.location="/"},getUserData:function(t){u.a.post("api/user/validate_token.php",{jwt:t}).then(function(t){localStorage.setItem("userData",l()(t.data.data))}).catch(function(t){console.log(t)})}},created:function(){this.isConnected=""!==localStorage.getItem("jwt"),this.isConnected?(this.getUserData(localStorage.getItem("jwt")),this.userData=JSON.parse(localStorage.getItem("userData"))):(localStorage.setItem("jwt",""),localStorage.setItem("userData","{}"))},components:{NavBar:p}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("NavBar"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col s12 m6 offset-m3"},[a("div",{staticClass:"card blue-grey lighten-3"},[t.isConnected?t._e():a("div",{staticClass:"card-content row"},[a("div",{staticClass:"col s10",attrs:{id:"login"}},[a("h2",[t._v("Connexion")]),t._v(" "),a("form",{attrs:{id:"login_form"},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("div",{attrs:{id:"response"}}),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[t._v("Adresse mail")]),t._v(" "),a("input",{ref:"email",staticClass:"form-control",attrs:{type:"email",id:"email",name:"email",placeholder:"Enter email"}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[t._v("Mot de passe")]),t._v(" "),a("input",{ref:"password",staticClass:"form-control",attrs:{type:"password",id:"password",name:"password",placeholder:"Password"}})]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Login")])])])]),t._v(" "),t.isConnected?a("div",{staticClass:"card-content row"},[a("div",{staticClass:"col s10",attrs:{id:"userDetails"}},[a("h4",{staticClass:"roboto"},[t._v("Connecté en tant que "+t._s(t.userData.firstname)+" "+t._s(t.userData.lastname))])]),t._v(" "),a("div",{staticClass:"col s12 center-align",attrs:{id:"logout"}},[a("button",{staticClass:"btn btn-primary blue-grey",on:{click:t.logout}},[t._v("Déconnexion")])])]):t._e()])])])],1)},staticRenderFns:[]},w=a("VU/8")(h,_,!1,null,null,null).exports;s.a.use(r.a);var C=new r.a({mode:"history",routes:[{path:"/",name:"dashboard",component:f},{path:"/account",name:"account",component:w}]}),b=a("ppUw"),D=a.n(b);s.a.use(C),s.a.use(D.a),s.a.config.productionTip=!1,new s.a({el:"#app",router:C,components:{App:n},template:"<App/>"})},qR8r:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.750bd31216a55456f738.js.map